# Supervisor配置文件 - 个人博客系统
# 路径: /etc/supervisor/conf.d/record_log.conf

[program:record_log]
command=/home/myblog/record_log/venv/bin/gunicorn -c /home/myblog/record_log/gunicorn.conf.py wsgi:application
directory=/home/myblog/record_log
user=myblog
autostart=true
autorestart=true
startretries=3
startsecs=5
stopsignal=TERM
stopwaitsecs=10
redirect_stderr=true
stdout_logfile=/home/myblog/record_log/logs/supervisor.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stdout_capture_maxbytes=1MB
stderr_capture_maxbytes=1MB
environment =
    FLASK_CONFIG="production",
    SECRET_KEY="d3^7Hp#9K$2Lm!8zPq6*1NsWv+Yb4cX5&jG0)Zx",
    DATABASE_URL="mysql+pymysql://blog_user:r2l20j25nbsimR@localhost:3306/record_log?charset=utf8mb4",
    PYTHONPATH="/home/myblog/record_log",
    PATH="/home/myblog/record_log/venv/bin:%(ENV_PATH)s"
priority=999
numprocs=1
process_name=%(program_name)s